<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="./style/page3.css">

</head>
<body>
  <div class="page3">
    <div style="display: none">ğŸ§â€ğŸ¤·â€â™‚ï¸ğŸ§â€â™€ï¸ğŸ„ğŸ‘ªğŸ¦ŒğŸ…ğŸŒ¨ï¸ğŸ‰â„ï¸ğŸ””âœ¨ğŸ‡ğŸ”®ğŸ’¡ğŸªğŸŒ•ğŸ”…â­ğŸŒŸğŸŒ </div>
    <div class="body">
      <div class="snow">
        <ul>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
        </ul>
        <ul class="round">
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
        </ul>
        <ul class="round">
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
        </ul>
        <ul class="round">
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
          <li>â„ï¸</li>
        </ul>
      </div>
      <div class="tree">
        <ul>
          <li>ğŸ„</li>
          <li>ğŸ„</li>
          <li>ğŸ„</li>
        </ul>
      </div>
      <div class="top">
        <div class="line">
          <ul>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
            <li>ğŸ’¡</li>
          </ul>
        </div>
      </div>
      <div class="sky">
        <ul>
          <li>ğŸŒ•</li>
          <li>ğŸŒŸ</li>
          <li>ğŸŒŸ</li>
          <li>ğŸŒŸ</li>
          <li>ğŸŒŸ</li>
          <li>ğŸŒ </li>
        </ul>
      </div>
      <div class="main">
        <div class="santa-wrap">
          <div class="santa">ğŸ™‹â€â™‚</div>
          <span class="face">ğŸ…</span>
        </div>
        <div class="chat"> </div>
      </div>
      <div class="deer">ğŸ¦Œ<button type="button" class="gift">ğŸ</button></div>
      <div class="popup">
        <div class="popup-box">
          <div class="popup-magic">ğŸ§š</div>
          <div class="popup-text">
            ë‚´ë…„ ë‹¹ì‹ ì€..
          </div>
          <div class="popup-slot">
            <div class="swiper slot slot1">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><span>ğŸ„</span></div>
                <div class="swiper-slide"><span>ğŸ…</span></div>
                <div class="swiper-slide"><span>â„ï¸</span></div>
                <div class="swiper-slide"><span>ğŸ¦Œ</span></div>
                <div class="swiper-slide"><span>ğŸ‡</span></div>
                <div class="swiper-slide"><span>ğŸ’©</span></div>
              </div>
            </div>
            <div class="swiper slot slot2">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><span>ğŸ…</span></div>
                <div class="swiper-slide"><span>ğŸ¦Œ</span></div>
                <div class="swiper-slide"><span>ğŸ„</span></div>
                <div class="swiper-slide"><span>â„ï¸</span></div>
                <div class="swiper-slide"><span>ğŸ’©</span></div>
                <div class="swiper-slide"><span>ğŸ‡</span></div>
              </div>
            </div>
            <div class="swiper slot slot3">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><span>ğŸ¦Œ</span></div>
                <div class="swiper-slide"><span>ğŸ„</span></div>
                <div class="swiper-slide"><span>â„ï¸</span></div>
                <div class="swiper-slide"><span>ğŸ’©</span></div>
                <div class="swiper-slide"><span>ğŸ…</span></div>
                <div class="swiper-slide"><span>ğŸ‡</span></div>
              </div>
            </div>
          </div>
          <div class="popup-result">ê³¼ì—°..?</div>
          <div  class="popup-cta"><button>ë°›ê¸°</button></div>
        </div>
      </div>
    </div>
  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/7.3.3/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/typeit@8.0.7/dist/index.umd.js"></script>
  <script>
    const body = document.querySelector('body');
    const chat = document.querySelector('.chat');
    const santa = document.querySelector('.santa');
    const face = document.querySelector('.face');
    const deer = document.querySelector('.deer');
    const gift = document.querySelector('.gift');
    const popup = document.querySelector('.popup');
    const result = document.querySelector('.popup-result');
    const popupCta = document.querySelector('.popup-cta');
    let slot1, slot2, slot3;

    const talk = () => {
      setTimeout(() => {
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('í•˜ì´').go();
      }, 2000);


      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ë‚˜ëŠ” ì‚°íƒ€ì•¼').go();
      }, 4000);

      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ğŸ””ë©”ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ğŸ””').go();
      }, 6000);

      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ê·¼ë° ë‚´ê°€ ì™œ ì™”ëƒê³ ?').go();
        santa.textContent = 'ğŸ¤·â€â™‚ï¸';
      }, 8000);

      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ì„ ë¬¼ì£¼ëŸ¬ì™”ì–´').go();
        // santa.textContent = 'ğŸ’â€â™‚ï¸';
        // face.style.left = '10px';
      }, 10000);


      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ëŒí”„ì•¼ ì½¤íˆì–¼').go();
        santa.textContent = 'ğŸ™‹â€â™‚ï¸';
        face.style.left = '';
      }, 12000);

      setTimeout(() => {
        deer.classList.add('is-active');
      }, 14000);
    }

    const openGift = () => {
      gift.textContent = '';
      popup.classList.add('is-active');
      slot();
    };

    const slot = () => {
      function randomNum(min, max){ var randNum = Math.floor(Math.random()*(max-min+1)) + min; return randNum; }
      const time = randomNum(2000, 4000);
      
      setTimeout(() => {
        slot1.autoplay.stop();
        setTimeout(() => {
          slot2.autoplay.stop();
        }, 500);
        setTimeout(() => {
          slot3.autoplay.stop();
          setTimeout(() => {
            popupCta.addEventListener('click', closeGift);
            const s1 = document.querySelector('.slot1 .swiper-slide-active').textContent;
            const s2 = document.querySelector('.slot2 .swiper-slide-active').textContent;
            const s3 = document.querySelector('.slot3 .swiper-slide-active').textContent;
            if(s1 === s2 && s2 === s3) {
              result.textContent = 'ë¡œë˜ ë‹¹ì²¨ë ì§€ë„..?'
            } else if (s1 === s2 || s1 === s3 || s2 === s3) { 
              result.textContent = 'ëˆì„ ë§ì´ ë²Œê²Œ ë©ë‹ˆë‹¤.'
            }else {
              result.textContent = 'í–‰ë³µí•œ 2022ë…„ ë˜ì„¸ìš”'
            }
          }, 1000)
        }, 800);
      }, time);
    }

    const closeGift = () => {
      popup.classList.remove('is-active');
      lastTalk();
    };

    const lastTalk = () => {
      gift.textContent = '';
      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('ê·¸ëŸ¼ í•œí•´ë™ì•ˆ ê³ ìƒí–ˆê³ ').go();
        santa.textContent = 'ğŸ™†â€â™‚ï¸';
      }, 1000);
      setTimeout(() => {
        chat.textContent = '';
        new TypeIt(chat, {
          speed: 50,
          waitUntilVisible: true,
        }).type('í–‰ì‡¼!').go();
        santa.textContent = 'ğŸ™‹â€â™‚ï¸';
      }, 3000);
      
      setTimeout(() => {
        body.classList.add('is-end');
      }, 5000);
    };

    talk();
    gift.addEventListener('click', openGift);

    slot1 = new Swiper(".slot1", {
      direction: "vertical",
      slidesPerView: "auto",
      centeredSlides: true,
      spaceBetween: 0,
      loop: true,
      autoplay: {
        delay: 0,
        disableOnInteraction: false,
      },
    });
    setTimeout(() => {
      slot2 = new Swiper(".slot2", {
        direction: "vertical",
        slidesPerView: "auto",
        centeredSlides: true,
        spaceBetween: 0,
        loop: true,
        autoplay: {
          delay: 0,
          disableOnInteraction: false,
        },
      });
    }, 500);
    setTimeout(() => {
      slot3 = new Swiper(".slot3", {
        direction: "vertical",
        slidesPerView: "auto",
        centeredSlides: true,
        spaceBetween: 0,
        loop: true,
        autoplay: {
          delay: 0,
          disableOnInteraction: false,
        },
      });
    }, 1000);
  </script>
</body>
</html>